<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            direction: rtl;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #2e8b57;
        }
        input, textarea, button, select {
            margin: 10px;
            padding: 12px;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #2e8b57;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #276b47;
        }
        #fileList {
            background: #fff;
            padding: 10px;
            margin: 10px auto;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: right;
        }
        .fileItem {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
        }
        .deleteBtn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        .deleteBtn:hover {
            background-color: #c0392b;
        }
        #log {
            background-color: #eee;
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            height: 200px;
            overflow-y: scroll;
            text-align: right;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h1>
    <p>âœ¨ Ø§Ø±ÙØ¹ÙŠ ØµÙˆØ±Ùƒ/ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒØŒ ÙˆØ­Ø¯Ø¯ÙŠ ÙˆÙ‚Øª Ø§Ù„Ù†Ø´Ø±ØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨ÙŠØ¹Ù…Ù„ ÙƒÙ„ Ø´ÙŠØ¡ ğŸ’¥</p>

    <input type="file" id="mediaFiles" multiple onchange="updateFileList()"><br>
    <div id="fileList"></div>

    <textarea id="customText" placeholder="ğŸ¤– Ø§ØªØ±ÙƒÙŠÙ‡ ÙØ§Ø±Øº Ù„Ù„ÙƒØ§Ø¨Ø´Ù† Ø§Ù„Ø°ÙƒÙŠ"></textarea><br>

    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</label>
    <input type="date" id="startDate"><br>
    <label>â° Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ø´Ø±:</label>
    <input type="time" id="publishTime" value="09:00"><br>
    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</label>
    <input type="date" id="endDate"><br>

    <button onclick="startScheduler()">âœ… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù†Ø´Ø±</button>

    <div id="log"></div>

    <script>
        let selectedFiles = [];
        const accessToken = "EAAapkpD793ABPKDi7LCKTgKctw029UXI4OydHo0ASgP1auoOOyHZCrIYY4RQk4fNyZAQvd8DE6O8HKADbs9XwqagKu2FlKkw3Vhm1HYwpCjoBBlvsL60dkIMlemVXEgbSHRlWcXQpE0P4Av7coN93ZB0fzCgSIZC1XZAbsR3utMhz652tBUPyoueNA9PAUBljt5ISECGYdDlz7TfwT62R2cjsk3rlUZCQZBNQyN2X702XZB5ZBKQiOCvThekI1ZCiwu8XpLGn5qWhpoyay8hefllZBrHb46mT9bMQZDZD";
        const pageId = "YOUR_PAGE_ID_HERE";
        const instaId = "YOUR_INSTAGRAM_ID_HERE";
        const whatsappNotificationNumber = "0599980515"; // Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø´Ø®ØµÙŠ
        const whatsappStoriesNumber = "Ø±Ù‚Ù… Ø§Ù„Ù…Ø·Ø¨Ø¹Ø© Ù‡Ù†Ø§"; // Ø±Ù‚Ù… Ø§Ù„Ù…Ø·Ø¨Ø¹Ø©

        function updateFileList() {
            const filesInput = document.getElementById('mediaFiles');
            selectedFiles = Array.from(filesInput.files);

            const fileListDiv = document.getElementById('fileList');
            fileListDiv.innerHTML = '';
            selectedFiles.forEach((file, index) => {
                fileListDiv.innerHTML += `
                    <div class="fileItem">
                        <span>${file.name}</span>
                        <button class="deleteBtn" onclick="removeFile(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>`;
            });
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            const dataTransfer = new DataTransfer();
            selectedFiles.forEach(file => dataTransfer.items.add(file));
            document.getElementById('mediaFiles').files = dataTransfer.files;
            updateFileList();
        }

        function log(msg) {
            const logDiv = document.getElementById("log");
            logDiv.innerHTML += `<p>ğŸ“Œ ${msg}</p>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function startScheduler() {
            const customText = document.getElementById("customText").value;
            const startDate = new Date(document.getElementById("startDate").value);
            const endDate = new Date(document.getElementById("endDate").value);
            const publishTime = document.getElementById("publishTime").value;

            if (!selectedFiles.length || !startDate || !endDate || !publishTime) {
                alert("âš ï¸ ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­Ø¯ÙŠØ¯ ÙƒÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„!");
                return;
            }

            let postDate = startDate;

            for (let i = 0; i < selectedFiles.length; i++) {
                if (postDate > endDate) break;

                const file = selectedFiles[i];
                const caption = customText || await generateAIcaption(file.name);

                if (!(await isContentAppropriate(file))) {
                    await sendWhatsappAlert(`ğŸš« Ø§Ù„Ù…Ù„Ù ${file.name} ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù†Ø´Ø±. Ø§Ø³ØªØ¨Ø¯Ù„ÙŠÙ‡.`);
                    continue;
                }

                const fullDateTime = `${postDate.toISOString().split('T')[0]}T${publishTime}:00`;
                log(`ğŸ“¤ Ù†Ø´Ø±: ${file.name} Ø¨ØªØ§Ø±ÙŠØ® ${fullDateTime}`);

                // Ù‡Ù†Ø§ ÙŠØªÙ… Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ§Øª
                await postToFacebook(file, caption);
                await postToInstagram(file, caption);
                await postToWhatsappStories(file, caption);

                await sendWhatsappAlert(`âœ… ØªÙ… Ø¬Ø¯ÙˆÙ„Ø© ${file.name} Ø¨ØªØ§Ø±ÙŠØ® ${fullDateTime}`);

                postDate.setDate(postDate.getDate() + 1);
            }

            log("ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­!");
        }

        async function generateAIcaption(filename) {
            log("ğŸ¤– ÙŠÙˆÙ„Ù‘Ø¯ ÙƒØ§Ø¨Ø´Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...");
            let type = filename.endsWith('.mp4') ? "ğŸ¥ ÙÙŠØ¯ÙŠÙˆ" : "ğŸ“¸ ØµÙˆØ±Ø©";
            const captions = [
                `${type} Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© âœ¨ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† â¤ï¸ #Ø§Ù„Ø­Ø§Ø¬_Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©`,
                `${type} Ù…Ù…ÙŠØ²! ğŸ˜ Ø§ÙƒØªØ´Ù Ø§Ù„Ø¹Ø±ÙˆØ¶ #ØªØµÙ…ÙŠÙ…_Ø­ØµØ±ÙŠ`,
                `${type} Ø¬Ø§Ù‡Ø² Ù„Ùƒ ğŸ“¦ Ø§Ø·Ù„Ø¨ ÙˆØ§Ø³ØªÙ„Ù… Ø¨Ø³Ø±Ø¹Ø© âš¡ #Ø·Ø¨Ø§Ø¹Ø©_Ù…Ù…ÙŠØ²Ø©`
            ];
            return captions[Math.floor(Math.random() * captions.length)];
        }

        async function isContentAppropriate(file) {
            log("ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰...");
            return Math.random() > 0.1; // Ø§Ø­ØªÙ…Ø§Ù„ 90% Ø£Ù†Ù‡ Ù…Ù†Ø§Ø³Ø¨ (Ù…Ø­Ø§ÙƒØ§Ø©)
        }

        async function postToFacebook(file, caption) {
            log(`âœ… Ù†Ø´Ø± Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ: ${file.name}`);
        }

        async function postToInstagram(file, caption) {
            log(`âœ… Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…: ${file.name}`);
        }

        async function postToWhatsappStories(file, caption) {
            log(`âœ… Ù†Ø´Ø± Ø³ØªÙˆØ±ÙŠ ÙˆØ§ØªØ³Ø§Ø¨: ${file.name}`);
        }

        async function sendWhatsappAlert(message) {
            log(`ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨: ${message}`);
        }
    </script>
</body>
</html>
