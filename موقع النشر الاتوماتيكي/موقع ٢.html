<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            direction: rtl;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #2e8b57;
        }
        input, textarea, button, select {
            margin: 10px;
            padding: 12px;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #2e8b57;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #276b47;
        }
        #fileList {
            background: #fff;
            padding: 10px;
            margin: 10px auto;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ddd;
            border-radius: 5px;
            text-align: right;
        }
        .fileItem {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
        }
        .deleteBtn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        .deleteBtn:hover {
            background-color: #c0392b;
        }
        #log {
            background-color: #eee;
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            height: 200px;
            overflow-y: scroll;
            text-align: right;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ù†Ø´Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</h1>
    <p>âœ¨ Ø§Ø±ÙØ¹ÙŠ ØµÙˆØ±Ùƒ/ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªÙƒØŒ ÙˆØ­Ø¯Ø¯ÙŠ ÙˆÙ‚Øª Ø§Ù„Ù†Ø´Ø±ØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨ÙŠØ¹Ù…Ù„ ÙƒÙ„ Ø´ÙŠØ¡ ğŸ’¥</p>

    <input type="file" id="mediaFiles" multiple onchange="updateFileList()"><br>
    <div id="fileList"></div>

    <textarea id="customText" placeholder="ğŸ¤– Ø§ØªØ±ÙƒÙŠÙ‡ ÙØ§Ø±Øº Ù„Ù„ÙƒØ§Ø¨Ø´Ù† Ø§Ù„Ø°ÙƒÙŠ"></textarea><br>

    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</label>
    <input type="date" id="startDate"><br>
    <label>â° Ø³Ø§Ø¹Ø© Ø§Ù„Ù†Ø´Ø±:</label>
    <input type="time" id="publishTime" value="09:00"><br>
    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©:</label>
    <input type="date" id="endDate"><br>

    <button onclick="startScheduler()">âœ… Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù†Ø´Ø±</button>

    <div id="log"></div>

    <script>
        let selectedFiles = [];
        const accessToken = "EAAapkpD793ABPKDi7LCKTgKctw029UXI4OydHo0ASgP1auoOOyHZCrIYY4RQk4fNyZAQvd8DE6O8HKADbs9XwqagKu2FlKkw3Vhm1HYwpCjoBBlvsL60dkIMlemVXEgbSHRlWcXQpE0P4Av7coN93ZB0fzCgSIZC1XZAbsR3utMhz652tBUPyoueNA9PAUBljt5ISECGYdDlz7TfwT62R2cjsk3rlUZCQZBNQyN2X702XZB5ZBKQiOCvThekI1ZCiwu8XpLGn5qWhpoyay8hefllZBrHb46mT9bMQZDZD";
        const pageId = "YOUR_PAGE_ID_HERE";
        const instaId = "YOUR_INSTAGRAM_ID_HERE";
        const whatsappNumber = "0599980515";

        function updateFileList() {
            const filesInput = document.getElementById('mediaFiles');
            selectedFiles = Array.from(filesInput.files);

            const fileListDiv = document.getElementById('fileList');
            fileListDiv.innerHTML = '';
            selectedFiles.forEach((file, index) => {
                fileListDiv.innerHTML += `
                    <div class="fileItem">
                        <span>${file.name}</span>
                        <button class="deleteBtn" onclick="removeFile(${index})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                    </div>`;
            });
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            updateFileList();
        }

        function log(msg) {
            const logDiv = document.getElementById("log");
            logDiv.innerHTML += `<p>ğŸ“Œ ${msg}</p>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function startScheduler() {
            const customText = document.getElementById("customText").value;
            const startDate = new Date(document.getElementById("startDate").value);
            const endDate = new Date(document.getElementById("endDate").value);
            const publishTime = document.getElementById("publishTime").value;

            if (!selectedFiles.length || !startDate || !endDate || !publishTime) {
                alert("âš ï¸ ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØªØ­Ø¯ÙŠØ¯ ÙƒÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„!");
                return;
            }

            let postDate = startDate;

            for (let i = 0; i < selectedFiles.length; i++) {
                if (postDate > endDate) break;

                const file = selectedFiles[i];
                const caption = customText || await generateAIcaption(file.name);
                const fullDateTime = `${postDate.toISOString().split('T')[0]}T${publishTime}:00`;

                log(`ğŸ“¤ Ù†Ø´Ø±: ${file.name} Ø¨ØªØ§Ø±ÙŠØ® ${fullDateTime}`);

                // Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ
                await postToFacebook(file, caption);

                // Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø³ØªØºØ±Ø§Ù…
                await postToInstagram(file, caption);

                // Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
                await sendWhatsappNotification(file.name, fullDateTime);

                postDate.setDate(postDate.getDate() + 1); // Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ØªØ§Ù„ÙŠ
            }

            log("ğŸ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­!");
        }

        async function generateAIcaption(filename) {
            log("ğŸ¤– ÙŠÙˆÙ„Ù‘Ø¯ ÙƒØ§Ø¨Ø´Ù† Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...");
            const captions = [
                `âœ¨ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† Ù…Ù† Ø§Ù„Ø­Ø§Ø¬ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© â¤ï¸`,
                `ğŸ¨ ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ Ù…Ø°Ù‡Ù„ Ø¨Ø§Ù†ØªØ¸Ø§Ø±Ùƒ!`,
                `ğŸ“¦ Ø§Ø·Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ø³ØªÙ„Ù… Ø¨Ø³Ø±Ø¹Ø© âš¡`
            ];
            return captions[Math.floor(Math.random() * captions.length)];
        }

        async function postToFacebook(file, caption) {
            log(`âœ… Ù†Ø´Ø± Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ: ${file.name}`);
            // Ù‡Ù†Ø§ Ù†Ø±Ø¨Ø· API ÙØ¹Ù„ÙŠ Ù„Ù„ÙÙŠØ³Ø¨ÙˆÙƒ
        }

        async function postToInstagram(file, caption) {
            log(`âœ… Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…: ${file.name}`);
            // Ù‡Ù†Ø§ Ù†Ø±Ø¨Ø· API ÙØ¹Ù„ÙŠ Ù„Ù„Ø¥Ù†Ø³ØªØºØ±Ø§Ù…
        }

        async function sendWhatsappNotification(fileName, dateTime) {
            log(`ğŸ“© Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§ØªØ³Ø§Ø¨: ØªÙ… Ø¬Ø¯ÙˆÙ„Ø© ${fileName} Ø¨ØªØ§Ø±ÙŠØ® ${dateTime}`);
            // Ù‡Ù†Ø§ Ù†Ø±Ø¨Ø· API Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
        }
    </script>
</body>
</html>
